<script>
  function generateQR() {
    const youtubeUrl = document.getElementById("youtubeUrl").value;

    try {
      const videoId = new URL(youtubeUrl).searchParams.get("v");
      if (!videoId) {
        alert("Invalid YouTube URL. Please include a valid video ID.");
        return;
      }

      const arPageUrl = `${window.location.origin}/ar-video.html?v=${videoId}`;
      document.getElementById("qr-output").innerHTML = "";
      new QRCode(document.getElementById("qr-output"), {
        text: arPageUrl,
        width: 200,
        height: 200,
      });
    } catch (e) {
      alert("Invalid URL format. Please enter a valid YouTube URL.");
    }
  }
</script>
