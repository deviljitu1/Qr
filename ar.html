<!DOCTYPE html>
<html>
<head>
  <title>AR YouTube Player</title>
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <style>
    #startButton {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 12px 24px;
      background: #FF0000; /* YouTube red */
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 16px;
      z-index: 10000;
    }
  </style>
</head>
<body>
  <a-scene vr-mode-ui="enabled: false">
    <!-- Dynamic video will appear here -->
    <a-video id="yt-video" width="4" height="2.25" position="0 1.5 -3"></a-video>
    <a-entity camera></a-entity>
  </a-scene>

  <button id="startButton">START AR EXPERIENCE</button>

  <script>
    document.getElementById('startButton').addEventListener('click', async () => {
      // Extract YouTube ID from URL (supports youtu.be/xxx and youtube.com?v=xxx)
      const urlParams = new URLSearchParams(window.location.search);
      let videoId = urlParams.get('v');
      
      if (!videoId) {
        const pathMatch = window.location.pathname.match(/\/v\/([^\/]+)/);
        if (pathMatch) videoId = pathMatch[1];
      }

      if (!videoId) {
        alert('No YouTube video ID found in URL');
        return;
      }

      // Create transparent YouTube player
      const iframe = document.createElement('iframe');
      iframe.style.cssText = `
        position: absolute;
        width: 1px;
        height: 1px;
        opacity: 0;
        pointer-events: none;
      `;
      iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&controls=0`;
      document.body.appendChild(iframe);

      // Wait for YouTube's video element to load
      const checkVideo = setInterval(() => {
        const ytVideo = document.querySelector('video');
        if (ytVideo) {
          clearInterval(checkVideo);
          const texture = new THREE.VideoTexture(ytVideo);
          document.getElementById('yt-video').setAttribute('material', 'src', texture);
        }
      }, 500);
    });
  </script>
</body>
</html>
